<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ESH National Dashboard ‚Äî Countries & Metros</title>
<style>
    :root {
        --bg: #0a0a0f;
        --card: #12121a;
        --border: #1e1e2e;
        --accent: #B8860B;
        --accent2: #4CAF50;
        --accent3: #2196F3;
        --text: #e0e0e0;
        --muted: #888;
        --high-income: #FFD700;
        --medium-income: #4CAF50;
        --low-income: #2196F3;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); padding: 20px; }
    
    /* Header */
    .header {
        display: flex; justify-content: space-between; align-items: center;
        background: linear-gradient(135deg, #1a1a2e 0%, #0a0a0f 100%);
        border-bottom: 2px solid var(--accent);
        padding: 15px 25px; border-radius: 10px; margin-bottom: 20px;
    }
    .header h1 { font-size: 1.5rem; color: var(--accent); }
    .header .stats { display: flex; gap: 20px; }
    .header .stats .stat { 
        background: var(--card); border: 1px solid var(--border);
        padding: 8px 16px; border-radius: 6px; text-align: center;
    }
    .header .stats .stat .num { font-size: 1.2rem; font-weight: 700; }
    .header .stats .stat .label { font-size: 0.75rem; color: var(--muted); }
    
    /* Country Section */
    .country-section {
        margin-bottom: 30px;
    }
    .country-header {
        background: var(--card); border: 1px solid var(--accent);
        border-radius: 8px; padding: 12px 18px;
        font-size: 1.2rem; font-weight: 600; color: var(--accent);
        display: flex; justify-content: space-between; align-items: center;
    }
    
    /* Metro Grid */
    .metro-grid {
        display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 15px; margin-top: 15px;
    }
    .metro-card {
        background: var(--card); border: 1px solid var(--border);
        border-radius: 10px; padding: 15px; cursor: pointer;
        transition: all 0.2s ease;
    }
    .metro-card:hover {
        transform: translateY(-3px); box-shadow: 0 5px 15px rgba(136, 102, 85, 0.3);
        border-color: var(--accent);
    }
    .metro-card.high { border-color: var(--high-income); }
    .metro-card.medium { border-color: var(--medium-income); }
    .metro-card.low { border-color: var(--low-income); }
    
    .metro-card .metro-name {
        font-size: 1.1rem; font-weight: 600; color: var(--accent);
        margin-bottom: 8px;
    }
    .metro-card .metro-state {
        font-size: 0.85rem; color: var(--muted); margin-bottom: 10px;
    }
    .metro-card .stats {
        display: grid; grid-template-columns: 1fr 1fr; gap: 10px;
        margin-bottom: 10px;
    }
    .metro-card .stat { display: flex; justify-content: space-between; }
    .metro-card .stat .label { font-size: 0.75rem; color: var(--muted); }
    .metro-card .stat .num { font-size: 1rem; font-weight: 700; }
    .metro-card .income-badge {
        display: inline-block; padding: 4px 10px; border-radius: 4px;
        font-size: 0.75rem; font-weight: 600; margin-top: 8px;
    }
    .income-high { background: var(--high-income); color: #000; }
    .income-medium { background: var(--medium-income); color: #000; }
    .income-low { background: var(--low-income); color: #fff; }
    
    /* Metro Detail View (FULL SCREEN) */
    .metro-detail {
        position: fixed; top: 0; left: 0; right: 0; bottom: 0;
        background: var(--bg); z-index: 1000; display: none;
        flex-direction: column; height: 100vh;
    }
    .metro-detail.active { display: flex; }
    
    .metro-detail-header {
        background: linear-gradient(135deg, #1a1a2e 0%, #0a0a0f 100%);
        border-bottom: 2px solid var(--accent);
        padding: 15px 25px; display: flex; justify-content: space-between;
    }
    .metro-detail-header h2 { font-size: 1.4rem; color: var(--accent); }
    .back-btn {
        background: var(--card); border: 1px solid var(--border);
        padding: 8px 16px; border-radius: 6px; cursor: pointer;
        font-size: 0.9rem; color: var(--text);
    }
    .back-btn:hover { background: var(--accent); color: #000; }
    
    .metro-detail-content {
        flex: 1; overflow-y: auto; padding: 20px;
    }
    
    /* Next Steps Panel */
    .next-steps {
        background: linear-gradient(135deg, #1a1a2e 0%, #0a0a0f 100%);
        border: 2px solid var(--accent2); border-radius: 10px;
        padding: 15px 20px; margin-bottom: 20px;
    }
    .next-steps h3 { color: var(--accent2); margin-bottom: 12px; }
    .next-steps ul { list-style: none; padding-left: 0; }
    .next-steps li {
        padding: 8px 0; border-left: 3px solid var(--accent2);
        margin-bottom: 8px; padding-left: 12px;
    }
    .next-steps li.done { 
        border-left-color: var(--accent3);
        text-decoration: line-through; color: var(--muted);
    }
    .next-steps li.active { 
        border-left-color: var(--accent);
        font-weight: 600; background: rgba(136, 102, 85, 0.1);
        padding-left: 12px; border-radius: 0 6px 6px 0;
    }
    
    /* Leads Table */
    .leads-table { width: 100%; border-collapse: collapse; margin-top: 15px; }
    .leads-table th {
        background: var(--card); color: var(--accent);
        padding: 10px; text-align: left; border-bottom: 2px solid var(--accent);
        font-size: 0.85rem; position: sticky; top: 0; z-index: 10;
    }
    .leads-table td {
        padding: 10px; border-bottom: 1px solid var(--border);
        font-size: 0.85rem;
    }
    .leads-table tr:hover { background: rgba(136, 102, 85, 0.1); }
    
    .tier-badge {
        display: inline-block; padding: 2px 8px; border-radius: 4px;
        font-size: 0.75rem; font-weight: 600;
    }
    .tier-4 { background: var(--accent2); color: #000; }
    .tier-5 { background: #FFD700; color: #000; }
    .tier-0-3 { background: var(--muted); color: #000; }
    
    /* Lead Type Badges */
    .type-contractor { background: #FF6B35; color: #fff; padding: 2px 8px; border-radius: 4px; font-size: 0.75rem; }
    .type-client { background: #4CAF50; color: #000; padding: 2px 8px; border-radius: 4px; font-size: 0.75rem; }
    
    /* Controls */
    .controls {
        background: var(--card); padding: 12px 18px;
        border-radius: 8px; margin-bottom: 15px;
        display: flex; gap: 10px; flex-wrap: wrap;
    }
    .controls input, .controls select {
        background: var(--bg); border: 1px solid var(--border);
        color: var(--text); padding: 8px 12px; border-radius: 6px;
    }
    .controls button {
        background: var(--accent); border: none; padding: 8px 16px;
        border-radius: 6px; cursor: pointer; color: #000;
        font-weight: 600;
    }
    .controls button:hover { opacity: 0.8; }
    
    @media (max-width: 768px) {
        .metro-grid { grid-template-columns: 1fr; }
        .metro-detail-header h2 { font-size: 1.1rem; }
    }
</style>
</head>
<body>

<div class="header">
    <div>
        <h1>üåç ESH National Dashboard</h1>
        <div style="color:var(--muted);font-size:0.8rem;margin-top:5px;">
            Countries ‚Üí Metros ‚Üí Leads | Full-Screen Views
        </div>
    </div>
    <div class="stats">
        <div class="stat">
            <div class="num">14841</div>
            <div class="label">Total Leads</div>
        </div>
        <div class="stat">
            <div class="num" style="color:var(--accent2)">13680</div>
            <div class="label">Tier 4-5</div>
        </div>
        <div class="stat">
            <div class="num" style="color:var(--accent3)">62</div>
            <div class="label">Metro Areas</div>
        </div>
    </div>
</div>

<!-- NEXT STEPS PANEL -->
<div class="next-steps">
    <h3>üöÄ Next Steps ‚Äî Moving Forward</h3>
    <ul>
        <li class="done">‚úÖ Configure DKIM for kmjk.pro</li>
        <li class="active">üî• Start 24/7 email warming (20 kmjk.pro + 100 ESH)</li>
        <li>üìß Feb 7th: Launch Treasure Coast outreach (1,082 Tier 4 leads)</li>
        <li>üîç Feb 8th: Find contractors in high-income metros (SF, NY, DC, etc.)</li>
        <li>üì© Feb 15th: Sign up 3-5 contractors (Elite Service Hub)</li>
        <li>üåê Mar 1st: Launch first new metro (SF Bay Area?)</li>
        <li>üìà Scale to 40 metros by end of year</li>
    </ul>
</div>

<!-- COUNTRIES & METROS -->
<div id="countries-view">

    <div class="country-section">
        <div class="country-header">
            <span>United States</span>
            <span style="color:var(--muted);font-size:0.85rem;">62 metro areas</span>
        </div>
        <div class="metro-grid">

            <div class="metro-card low-income" onclick="showMetroDetail('Stuart FL')">
                <div class="metro-name">Stuart FL</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">2,822</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">2672</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Hobe FL')">
                <div class="metro-name">Hobe FL</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">1,089</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">1050</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Port FL')">
                <div class="metro-name">Port FL</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">861</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">825</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Fort FL')">
                <div class="metro-name">Fort FL</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">832</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">796</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Jensen FL')">
                <div class="metro-name">Jensen FL</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">811</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">772</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Palm FL')">
                <div class="metro-name">Palm FL</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">800</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">764</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Vero FL')">
                <div class="metro-name">Vero FL</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">771</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">745</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Sebastian FL')">
                <div class="metro-name">Sebastian FL</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">691</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">660</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Stuart')">
                <div class="metro-name">Stuart</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">399</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">386</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Jensen Beach')">
                <div class="metro-name">Jensen Beach</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">384</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">348</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Jupiter')">
                <div class="metro-name">Jupiter</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">243</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">223</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Fort Pierce')">
                <div class="metro-name">Fort Pierce</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">240</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">224</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Vero Beach')">
                <div class="metro-name">Vero Beach</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">232</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">217</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Port St Lucie')">
                <div class="metro-name">Port St Lucie</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">150</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">147</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Port St. Lucie')">
                <div class="metro-name">Port St. Lucie</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">140</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">118</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Sarasota')">
                <div class="metro-name">Sarasota</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">137</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">113</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Orlando')">
                <div class="metro-name">Orlando</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">136</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">116</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Naples')">
                <div class="metro-name">Naples</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">135</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">124</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Miami')">
                <div class="metro-name">Miami</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">133</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">113</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('St. Petersburg')">
                <div class="metro-name">St. Petersburg</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">132</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">111</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Tampa')">
                <div class="metro-name">Tampa</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">132</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">118</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Nashville')">
                <div class="metro-name">Nashville</div>
                <div class="metro-state">TN</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">131</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">110</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('West Palm Beach')">
                <div class="metro-name">West Palm Beach</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">131</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">99</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Jacksonville')">
                <div class="metro-name">Jacksonville</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">129</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">118</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Boca Raton')">
                <div class="metro-name">Boca Raton</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">123</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">110</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Fort Lauderdale')">
                <div class="metro-name">Fort Lauderdale</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">121</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">106</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Fort Myers')">
                <div class="metro-name">Fort Myers</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">120</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">97</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Sebastian')">
                <div class="metro-name">Sebastian</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">119</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">119</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Palm City')">
                <div class="metro-name">Palm City</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">118</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">118</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Hobe Sound')">
                <div class="metro-name">Hobe Sound</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">118</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">118</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Palm Bay')">
                <div class="metro-name">Palm Bay</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">116</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">101</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Palm Coast')">
                <div class="metro-name">Palm Coast</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">116</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">110</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Fort Pierce North')">
                <div class="metro-name">Fort Pierce North</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">111</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">111</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Atlanta')">
                <div class="metro-name">Atlanta</div>
                <div class="metro-state">GA</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">103</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">92</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Jackson')">
                <div class="metro-name">Jackson</div>
                <div class="metro-state">MS</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">102</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">83</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Augusta')">
                <div class="metro-name">Augusta</div>
                <div class="metro-state">GA</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">102</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">81</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Macon')">
                <div class="metro-name">Macon</div>
                <div class="metro-state">GA</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">97</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">87</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Charleston')">
                <div class="metro-name">Charleston</div>
                <div class="metro-state">SC</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">97</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">78</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Raleigh')">
                <div class="metro-name">Raleigh</div>
                <div class="metro-state">NC</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">95</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">72</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Montgomery')">
                <div class="metro-name">Montgomery</div>
                <div class="metro-state">AL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">94</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">81</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Gulfport')">
                <div class="metro-name">Gulfport</div>
                <div class="metro-state">MS</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">94</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">74</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Savannah')">
                <div class="metro-name">Savannah</div>
                <div class="metro-state">GA</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">93</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">85</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Athens')">
                <div class="metro-name">Athens</div>
                <div class="metro-state">GA</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">91</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">83</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Durham')">
                <div class="metro-name">Durham</div>
                <div class="metro-state">NC</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">91</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">87</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Huntsville')">
                <div class="metro-name">Huntsville</div>
                <div class="metro-state">AL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">90</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">69</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Columbus')">
                <div class="metro-name">Columbus</div>
                <div class="metro-state">GA</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">90</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">81</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Memphis')">
                <div class="metro-name">Memphis</div>
                <div class="metro-state">TN</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">86</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">71</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Knoxville')">
                <div class="metro-name">Knoxville</div>
                <div class="metro-state">TN</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">85</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">74</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Greenville')">
                <div class="metro-name">Greenville</div>
                <div class="metro-state">SC</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">82</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">63</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Columbia')">
                <div class="metro-name">Columbia</div>
                <div class="metro-state">SC</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">79</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">62</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Mobile')">
                <div class="metro-name">Mobile</div>
                <div class="metro-state">AL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">75</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">61</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Myrtle Beach')">
                <div class="metro-name">Myrtle Beach</div>
                <div class="metro-state">SC</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">74</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">57</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Shreveport')">
                <div class="metro-name">Shreveport</div>
                <div class="metro-state">LA</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">74</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">72</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Charlotte')">
                <div class="metro-name">Charlotte</div>
                <div class="metro-state">NC</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">71</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">63</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Charleston')">
                <div class="metro-name">Charleston</div>
                <div class="metro-state">WV</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">60</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">51</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Treasure Coast FL')">
                <div class="metro-name">Treasure Coast FL</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">57</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">0</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Dallas-Fort Worth')">
                <div class="metro-name">Dallas-Fort Worth</div>
                <div class="metro-state">TX</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">56</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">39</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Birmingham')">
                <div class="metro-name">Birmingham</div>
                <div class="metro-state">AL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">53</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">52</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Martin FL')">
                <div class="metro-name">Martin FL</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">12</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">0</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Indian FL')">
                <div class="metro-name">Indian FL</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">11</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">0</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('Palm Beach Gardens')">
                <div class="metro-name">Palm Beach Gardens</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">3</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">3</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

            <div class="metro-card low-income" onclick="showMetroDetail('St FL')">
                <div class="metro-name">St FL</div>
                <div class="metro-state">FL</div>
                <div class="stats">
                    <div class="stat">
                        <span class="label">Leads</span>
                        <span class="num">1</span>
                    </div>
                    <div class="stat">
                        <span class="label">Tier 4-5</span>
                        <span class="num">0</span>
                    </div>
                </div>
                <div class="income-badge low-income">
                    N/A median income
                </div>
            </div>

        </div>
    </div>

</div>

<!-- METRO DETAIL VIEW (FULL SCREEN) -->
<div id="metro-detail" class="metro-detail">
    <div class="metro-detail-header">
        <h2 id="detail-metro-name">Metro Name</h2>
        <button class="back-btn" onclick="hideMetroDetail()">‚Üê Back to Metros</button>
    </div>
    <div class="metro-detail-content">
        <div class="controls">
            <input type="text" id="detail-search" placeholder="Search leads..." oninput="filterDetailLeads()">
            <select id="detail-tier-filter" onchange="filterDetailLeads()">
                <option value="">All Tiers</option>
                <option value="5">Tier 5 (Best)</option>
                <option value="4">Tier 4 (Good)</option>
                <option value="3">Tier 3</option>
                <option value="2">Tier 2</option>
                <option value="1">Tier 1</option>
                <option value="0">Tier 0 (Needs Enrichment)</option>
            </select>
            <select id="detail-type-filter" onchange="filterDetailLeads()">
                <option value="">All Types</option>
                <option value="client">Clients</option>
                <option value="contractor">Contractors</option>
            </select>
            <button onclick="selectVisibleDetail()">Select All Visible</button>
        </div>
        <div id="detail-stats" style="margin-bottom:15px;color:var(--muted);"></div>
        <table class="leads-table" id="detail-table">
            <thead>
                <tr>
                    <th style="width:40px;"><input type="checkbox" id="detail-select-all"></th>
                    <th>Type</th>
                    <th>Business</th>
                    <th>Contact</th>
                    <th>City</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th>Tier</th>
                    <th>Priority</th>
                </tr>
            </thead>
            <tbody id="detail-tbody">
                <tr><td colspan="9" style="text-align:center;color:var(--muted);">
                    Loading leads...
                </td></tr>
            </tbody>
        </table>
    </div>
</div>

<script>
// Fetch leads from PostgreSQL API dynamically
const API_BASE = 'http://0.0.0.0:8182/api/metro-leads';

function showMetroDetail(metroName) {{

function showMetroDetail(metroName) {{
    document.getElementById('countries-view').style.display = 'none';
    document.getElementById('metro-detail').classList.add('active');
    document.getElementById('detail-metro-name').textContent = metroName;
    document.getElementById('detail-stats').textContent = 'Loading leads...';
    
    // Fetch leads from API
    fetch(`${{API_BASE}}?metro=${{encodeURIComponent(metroName)}}`)
        .then(response => response.json())
        .then(data => {{
            if (data.error) {{
                document.getElementById('detail-tbody').innerHTML = `
                    <tr><td colspan="9" style="text-align:center;color:var(--muted);">
                        Error: ${{data.error}}
                    </td></tr>
                `;
                return;
            }}
            
            renderDetailTable(data.leads);
            document.getElementById('detail-stats').textContent = 
                `Showing ${{data.count}} leads for ${{data.metro}}`;
        }})
        .catch(err => {{
            document.getElementById('detail-tbody').innerHTML = `
                <tr><td colspan="9" style="text-align:center;color:var(--muted);">
                    Failed to load leads: ${{err.message}}
                </td></tr>
            `;
        });
}}

function hideMetroDetail() {{
    document.getElementById('metro-detail').classList.remove('active');
    document.getElementById('countries-view').style.display = 'block';
}}

function renderDetailTable(leads) {{
    const tbody = document.getElementById('detail-tbody');
    const search = document.getElementById('detail-search').value.toLowerCase();
    const tierFilter = document.getElementById('detail-tier-filter').value;
    const typeFilter = document.getElementById('detail-type-filter').value;
    
    let filtered = leads.filter(l => {{
        const matchSearch = !search || 
            l.business_name.toLowerCase().includes(search) ||
            (l.contact_name || '').toLowerCase().includes(search) ||
            (l.email || '').toLowerCase().includes(search);
        const matchTier = !tierFilter || l.tier.toString() === tierFilter;
        const matchType = !typeFilter || l.lead_type === typeFilter;
        return matchSearch && matchTier && matchType;
    }});
    
    // Update stats
    document.getElementById('detail-stats').textContent = 
        `Showing ${{filtered.length}} of ${{leads.length}} leads`;
    
    if (filtered.length === 0) {{
        tbody.innerHTML = `
            <tr>
                <td colspan="9" style="text-align:center;color:var(--muted);">
                    No leads match your filters
                </td>
            </tr>
        `;
        return;
    }}
    
    // Render rows
    tbody.innerHTML = filtered.map(l => {{
        const tierClass = l.tier >= 4 ? 'tier-4' : (l.tier >= 4 ? 'tier-5' : 'tier-0-3');
        const tierLabel = l.tier >= 4 ? (l.tier === 5 ? '5 (Best)' : '4 (Good)') : l.tier;
        const typeClass = l.lead_type === 'contractor' ? 'type-contractor' : 'type-client';
        const typeLabel = l.lead_type === 'contractor' ? 'Contractor' : 'Client';
        
        return `
            <tr>
                <td><input type="checkbox" data-id="${{l.id}}"></td>
                <td><span class="${{typeClass}}">${{typeLabel}}</span></td>
                <td>${{l.business_name || 'N/A'}</td>
                <td>${{l.contact_name || 'N/A'}</td>
                <td>${{l.city || 'N/A'}</td>
                <td>${{l.email || 'N/A'}</td>
                <td>${{l.phone || 'N/A'}</td>
                <td><span class="${{tierClass}}">${{tierLabel}}</span></td>
                <td>${{l.priority || 'N/A'}</td>
            </tr>
        `;
    }}).join('');
}}

function filterDetailLeads() {{
    // Re-render current metro's leads
    const metroName = document.getElementById('detail-metro-name').textContent;
    if (allLeads[metroName]) {{
        renderDetailTable(allLeads[metroName]);
    }}
}}

function selectVisibleDetail() {{
    const checkboxes = document.querySelectorAll('#detail-tbody input[type="checkbox"]');
    checkboxes.forEach(cb => cb.checked = true);
}}

// Load leads data (Python will insert this)
// Placeholder for now
</script>

</body>
</html>
